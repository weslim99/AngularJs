<html ng-app="listaTelefonica">
    <head>
            <title>Lista Telefonica</title>
            <link rel="stylesheet" href="node_modules/bootstrap/compiler/bootstrap.css">
            <link rel="stylesheet" type="text/css" href="style/css/style.css">
            <link rel="stylesheet" type="text/css" href="node_modules/font-awesome/css/font-awesome.css">
            <style>
                .jumbotron {
                    width: 500px;
                    text-align: center;
                    margin-top: 20px;
                    margin-left: auto;
                    margin-right: auto;

                }
                .table{
                    margin-top: 20px;
                }
                .form-control{
                    margin-bottom: 5px;
                }
                .selecionado{
                    background-color: coral;
                }
                .negrito{
                    font-weight: bold;
                }
            </style>           
            <script src= lib/angular.js></script>
            <script>
                angular.module("listaTelefonica", []);
                angular.module("listaTelefonica").controller("listaTelefonicaController", function($scope){
                    $scope.app = "Lista Telef√¥nica";

                    $scope.contatos = [
                        {nome: "Wesley", telefone: "988833333", cor: "green"},
                        {nome: "Marcos", telefone: "988833333", cor: "red"}, 
                        {nome: "Natany", telefone: "988833333", cor: "blue"}
                    ];

                    $scope.operadoras = [
                        {nome: "Vivo", codigo: "15", categoria: "Celular"},
                        {nome: "Oi", codigo: "14", categoria: "Celular"},
                        {nome: "Tim", codigo: "41", categoria: "Celular"},
                        {nome: "GVT", codigo: "25", categoria: "Fixo"},
                        {nome: "Embratel", codigo: "21", categoria: "Fixo"}
                    ];

                    $scope.adicionarContato = function(contato){
                        $scope.contatos.push(angular.copy(contato));
                        delete $scope.contato;                       
                    };

                    $scope.apagarContatos = function(contatos){
                        $scope.contatos = contatos.filter(function (contato){
                            if(!contato.selecionado) return contato;
                        });
                    };

                    $scope.isContatoSelecionado = function (contatos){
                        contatos.some(function (contato){
                            return contato.selecionado;
                        });
                    };
                });
            </script>
    </head>
   <body>
       <div ng-controller="listaTelefonicaController" class="jumbotron">
            <h3>{{app}}</h3>            
            <table ng-show="contatos.length > 0" class="table table-striped">
                <tr>
                    <th></th>
                    <th>Nome</th>
                    <th>Telefone</th>
                    <th>Operadora</th>
                    <th></th>
                </tr>
                <tr ng-class="{'selecionado negrito': contato.selecionado}" ng-repeat= "contato in contatos">
                    <td><input type="checkbox" ng-model="contato.selecionado"/></td>
                    <td>{{contato.nome}}</td>
                    <td>{{contato.telefone}}</td>
                    <td>{{contato.operadora.nome}}</td>
                    <td><div style="width: 20px; height: 20px;" ng-style="{'background-color': contato.cor}"></div></td>
                </tr>
            </table>
            {{contato}}
        <hr/>
        <input class="form-control" type="text" ng-model="contato.nome" placeholder="Nome">
        <input class="form-control" type="text" ng-model="contato.telefone" placeholder="Telefone">
        <select class="form-control" ng-model= "contato.operadora" ng-options= "operadora.nome group by operadora.categoria for operadora in operadoras">
            <option value="">Selecione uma operadora</option>
        </select>
        <button class="btn btn-primary btn-block" ng-click="adicionarContato(contato)" ng-disabled="!contato.nome || !contato.telefone">Adicionar Contato</button>
        <button class="btn btn-danger btn-block" ng-click="apagarContatos(contatos)" ng-disabled="isContatoSelecionado(contatos)">Apagar Contato</button>
       </div>
       <div ng-include="'footer.html'"></div>
   </body>
</html>